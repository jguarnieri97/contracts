app.start.mode: test

spring:
  application:
    name: contracts
  datasource:
    url: jdbc:h2:mem:testdb;DB_CLOSE_ON_EXIT=FALSE;INIT=CREATE SCHEMA IF NOT EXISTS CONTRACTS\;SET SCHEMA CONTRACTS\;CREATE TYPE IF NOT EXISTS CONTRACTS.WORK_STATE_ENUM AS ENUM ('PENDING', 'IN_PROGRESS', 'FINALIZED', 'CANCELLED')\;CREATE TABLE IF NOT EXISTS CONTRACTS.WORK_CONTRACT (id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, code_number VARCHAR(255) NOT NULL UNIQUE, price DOUBLE PRECISION, date_from DATE, date_to DATE, contract_detail TEXT, contract_state WORK_STATE_ENUM, supplier_id BIGINT NOT NULL, applicant_id BIGINT NOT NULL)\;CREATE TABLE IF NOT EXISTS CONTRACTS.CONTRACT_WORKERS (contract_id BIGINT NOT NULL, worker_id BIGINT NOT NULL, PRIMARY KEY (contract_id, worker_id), FOREIGN KEY (contract_id) REFERENCES CONTRACTS.WORK_CONTRACT(id) ON DELETE CASCADE)\;CREATE TABLE IF NOT EXISTS CONTRACTS.CONTRACT_IMAGE (id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, img_data BYTEA NOT NULL, contract_id BIGINT NOT NULL, FOREIGN KEY (contract_id) REFERENCES CONTRACTS.WORK_CONTRACT(id) ON DELETE CASCADE)\;CREATE TABLE IF NOT EXISTS CONTRACTS.DELIVERY_NOTE (id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, contract_id BIGINT NOT NULL UNIQUE, note_data BYTEA, tx_hash VARCHAR(255), data_hash VARCHAR(255), block_number VARCHAR(255), created_at TIMESTAMP NOT NULL, FOREIGN KEY (contract_id) REFERENCES CONTRACTS.WORK_CONTRACT(id) ON DELETE CASCADE)\;CREATE INDEX IF NOT EXISTS idx_work_contract_applicant ON CONTRACTS.WORK_CONTRACT(applicant_id)\;CREATE INDEX IF NOT EXISTS idx_work_contract_supplier ON CONTRACTS.WORK_CONTRACT(supplier_id)\;CREATE INDEX IF NOT EXISTS idx_work_contract_dates ON CONTRACTS.WORK_CONTRACT(date_from, date_to)\;CREATE INDEX IF NOT EXISTS idx_contract_workers_worker ON CONTRACTS.CONTRACT_WORKERS(worker_id)\;CREATE INDEX IF NOT EXISTS idx_delivery_note_contract ON CONTRACTS.DELIVERY_NOTE(contract_id)\;CREATE INDEX IF NOT EXISTS idx_delivery_note_tx_hash ON CONTRACTS.DELIVERY_NOTE(tx_hash)
    driverClassName: org.h2.Driver
    username: sa
    password:
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: true
  h2:
    console:
      enabled: true
    path: /h2-console

